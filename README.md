# VKinder - пользовательская инструкция

**VKinder** - это бот, реализованный на базе ВК, который позволяет искать кандидатов для новых знакомств, подходящих по параметрам: возраст, город и пол.

## Подготовка к работе с VKinder

### Инструменты
Убедитесь, что все необходимые инструменты установлены и корректно работают.

Список инструментов, которые потребуются для работы с VKinder:
- Python 3.10
- PyCharm / Visual Studio
- Git и GitHub
- Chrome / Microsoft Edge / Yandex Browser
 
### Установка необходимых компонентов:
1. Склонируйте данные из репозитория в локальную папку:
   - Создайте папку на Вашем компьютере (имя папки не является важным) 
   - Инициализируйте папку для работы с Git через Git Bash при помощи команды: `$git init`
   - Введите команду: 
   
     `$git clone -b main <ссылка на этот репозиторий>`
   

2. Откройте склонированный проект при помощи IDE (PyCharm, Visual Studio, и т.д.)


3. Откройте файл _config.yaml_ и введите в него свои ACCESS_TOKEN и DB_PASS:
![tokens](https://cdn.discordapp.com/attachments/1116754929567137813/1171364590228099142/image.png)

    **ВАЖНО:** Если у Вас еще нет пользовательского токена ВК, то проследуйте шагам, указанным в этой [инструкции](https://docs.google.com/document/d/1_xt16CMeaEir-tWLbUFyleZl6woEdJt-7eyva1coT3w/edit#heading=h.4cksbw8kq4a1)


4. Установите необходимые библиотеки из файла requirements.txt через команду в терминале:
    
    `pip install -r requirements.txt`


5. Создайте таблицы для БД:

    - Откройте файл models.py
    - Откомментируйте вызов функции main()
    - Запустите исполнение файла models.py
    - Проверьте в консоли IDE сообщение, подтверждающее успешность создания таблиц:
![db_tables_creation](https://cdn.discordapp.com/attachments/1116754929567137813/1171368099694514197/image.png)
    - Закомментируйте функцию main() обратно

## Запуск и работа с ботом VKinder
1. Запустите исполнение кода файла main.py в IDE
2. Перейдите по этой [ссылке](https://vk.com/public223098125) на группу вк, к которому "прикручен" бот
3. В шапке профиля группы, нажмите кнопку "Сообщение"
4. Отправьте сообщение "Привет", от бота поступит ответное сообщение:
   ![greeting_msg](https://cdn.discordapp.com/attachments/1116754929567137813/1171374691580117002/image.png)
5. Нажмите кнопку "Да!", чтобы получать подходящих по параметрам пользователей ВК поочередно:
   ![yes_button](https://cdn.discordapp.com/attachments/1116754929567137813/1171377208258990141/image.png)
6. Нажмите кнопки, чтобы запустить один из сценариев:
   - "Дальше" - чтобы перейти к другому подходящему пользователю
   - "Добавить" - чтобы добавить пользователя в список избранных
7. Нажмите кнопку "Избранное", чтобы посмотреть добавленных в избранное пользователей:
   - ![fav_users](https://cdn.discordapp.com/attachments/1116754929567137813/1171379493856886825/image.png)
8. На любом из этапов взаимодействия с ботом, можно завершить сессию путем нажатия на кнопку "Закончить"
9. Остановите исполнение кода файла main.py в IDE

## Технические особенности модулей VKinder
### main.py
Главный модуль проекта, отвечающий за вызов бота.
### bot_vk.py
Отвечает за логику и оболочку бота.
### models.py
Отвечает за создание таблиц в БД. По необходимости, этот модуль используется для очищения и удаления таблиц. 

Схема таблиц vkinder_db:
![db_structure](https://cdn.discordapp.com/attachments/1116754929567137813/1171783976583704667/db_structure.drawio2.png)

### db_injections.py
Отвечает за сбор информации и фотографий пользователей ВК, удовлетворяющих критериям поиска.
### pick_data_from_db.py
Отвечает за перенос информации из БД в чат ВК
### config.yaml
Отвечает за хранение пользовательского токена ВК, паролю от postgre, а также токена к группе, к которому "прикручен" бот.
